var f=Object.defineProperty;var h=(t,e,n)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var c=(t,e,n)=>h(t,typeof e!="symbol"?e+"":e,n);class p{constructor(){c(this,"eventsMap");this.eventsMap=new Map}emit(e,n){const i=this.eventsMap.get(e);return!i||i.size==0?!1:(i.forEach(o=>o(n)),!0)}on(e,n){this.eventsMap.has(e)||this.eventsMap.set(e,new Set),this.eventsMap.get(e).add(n)}off(e,n){const i=this.eventsMap.get(e);return i?i.delete(n):!1}}const a=new p,w=330,g="stealthex-widget";let r=0;function u(t,e){const{size:n=330,containerId:i="stealthex-widget-container",iframeHost:o="https://stealthex.io"}=e||{};if(typeof document>"u")throw new Error("You are trying to initialize widget in a non-browser environment");const d=document.getElementById(i);if(d==null)throw new Error(`Could not find container with the following id: ${i}`);const s=document.createElement("iframe");return s.id=g,s.src=`${o}/widget/${t}/`,s.style.border="none",s.style.borderRadius="10px",s.style.overflow="hidden",s.style.width="100%",s.style.maxWidth=`${n}px`,s.style.height=`${w}px`,s.style.boxShadow="0px 0px 32px 0px rgba(0, 0, 0, 0.06)",s.style.display="block",d.appendChild(s),r+=1,r==1&&window.addEventListener("message",l),()=>{r-=1,r==0&&window.removeEventListener("message",l),s.remove()}}function l(t){if(typeof t.data=="object"&&"type"in t.data)switch(t.data.type){case"sx-widget-exchangestart":{a.emit("exchangestart");break}case"sx-widget-statuschange":{"details"in t.data&&typeof t.data.details=="string"&&a.emit("statuschange",t.data.details);break}}}const m={on:a.on.bind(a),off:a.off.bind(a)};var y=Object.freeze({__proto__:null,events:m,init:u});export{y as default};
